# Kubernetes 4.4

–¶–µ —à–∞–±–ª–æ–Ω –¥–ª—è Kubernetes/4.4.

‚úÖ –ß–∏ –≤–∏–∫–æ–Ω—É—î —Ñ–∞–π–ª hpa.yaml –∑–∞–≤–¥–∞–Ω–Ω—è 4.4?
–¢–∞–∫, –≤–∏–∫–æ–Ω—É—î.
–§–∞–π–ª –æ–ø–∏—Å—É—î HorizontalPodAutoscaler (HPA), —è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—Å—à—Ç–∞–±—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–¥—ñ–≤ Deployment myapp –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ CPU-–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

‚öôÔ∏è –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —É Minikube?
–ó–∞–ø—É—Å—Ç—ñ—Ç—å Minikube:


minikube start
–£–≤—ñ–º–∫–Ω—ñ—Ç—å Metrics Server (–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –¥–ª—è HPA):


minikube addons enable metrics-server
–ó–∞—Å—Ç–æ—Å—É–π—Ç–µ HPA YAML:


kubectl apply -f hpa.yaml
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å HPA:


kubectl get hpa
üõ† –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?
HPA —Å–ª—ñ–¥–∫—É—î –∑–∞ —Å–µ—Ä–µ–¥–Ω—ñ–º CPU-—Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è–º —É—Å—ñ—Ö –ø–æ–¥—ñ–≤ Deployment myapp.

–Ø–∫—â–æ —Å–µ—Ä–µ–¥–Ω—î –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è > 50% ‚Äî Kubernetes –¥–æ–¥–∞—î –±—ñ–ª—å—à–µ –ø–æ–¥—ñ–≤ (–¥–æ maxReplicas: 5).

–Ø–∫—â–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∞–¥–∞—î < 50%, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–¥—ñ–≤ –∑–º–µ–Ω—à—É—î—Ç—å—Å—è (–∞–ª–µ –Ω–µ –º–µ–Ω—à–µ minReplicas: 1).

–ü–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –ø–æ–¥–∏ –º–∞–ª–∏ CPU-—Ä–µ—Å—É—Ä—Å–∏ –≤ resources.requests, —ñ–Ω–∞–∫—à–µ –º–µ—Ç—Ä–∏–∫–∞ –±—É–¥–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

‚ùóÔ∏è –í–∞–∂–ª–∏–≤–æ
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤–∞—à Deployment –º–∞—î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π resources.requests.cpu, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

yaml

resources:
  requests:
    cpu: "100m"
–ë–µ–∑ —Ü—å–æ–≥–æ HPA –Ω–µ –∑–º–æ–∂–µ –≤–∏–º—ñ—Ä—è—Ç–∏ CPU-–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –π –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ —è–∫ –æ—á—ñ–∫—É—î—Ç—å—Å—è.

üìå –í–∏—Å–Ω–æ–≤–æ–∫
–§–∞–π–ª –∫–æ—Ä–µ–∫—Ç–Ω–∏–π, —ñ –≤—ñ–Ω —Ä–µ–∞–ª—ñ–∑—É—î –∑–∞–≤–¥–∞–Ω–Ω—è 4.4.

–ó–∞–ø—É—Å–∫ —É Minikube –ø–æ—Ç—Ä–µ–±—É—î metrics-server —ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ CPU —É –ø–æ–¥–∞—Ö.